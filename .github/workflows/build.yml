name: Build ImmortalWrt x86_64 Complete

on:
  workflow_dispatch:
    inputs:
      firmware_version:
        description: 'ImmortalWrt ç‰ˆæœ¬'
        required: true
        default: 'v24.10.2'
        type: choice
        options:
          - 'v24.10.2'
          - 'v23.05.4'
      include_docker:
        description: 'åŒ…å« Docker æ”¯æŒ'
        required: true
        default: true
        type: boolean
      include_passwall2:
        description: 'åŒ…å« PassWall2'
        required: true
        default: true
        type: boolean
      rootfs_size:
        description: 'æ ¹åˆ†åŒºå¤§å° (MB)'
        required: true
        default: '1024'
      kernel_size:
        description: 'å†…æ ¸åˆ†åŒºå¤§å° (MB)'
        required: true
        default: '32'

env:
  TZ: Asia/Shanghai

jobs:
  build:
    runs-on: ubuntu-22.04
    timeout-minutes: 360

    steps:
    - name: Checkout Repository
      uses: actions/checkout@v4

    - name: Initialize Build Environment
      run: |
        echo "=== åˆå§‹åŒ–æ„å»ºç¯å¢ƒ ==="
        echo "æ„å»ºæ—¶é—´: $(date)"
        echo "ç³»ç»Ÿä¿¡æ¯: $(uname -a)"
        echo "å¯ç”¨CPU: $(nproc)"
        echo "å†…å­˜ä¿¡æ¯: $(free -h)"
        echo "ç£ç›˜ä¿¡æ¯: $(df -h /)"

    - name: Free Up Disk Space
      run: |
        echo "=== æ¸…ç†ç£ç›˜ç©ºé—´ ==="
        # åˆ é™¤ä¸éœ€è¦çš„è½¯ä»¶å’Œæ–‡ä»¶
        sudo rm -rf /etc/apt/sources.list.d/* /usr/share/dotnet /usr/local/lib/android /opt/ghc
        sudo rm -rf /usr/local/.ghcup /usr/local/lib/android /usr/local/share/boost /usr/local/go
        sudo rm -rf /opt/az /opt/microsoft /usr/share/swift /usr/local/share/chromium
        sudo rm -rf /usr/local/share/powershell /usr/local/share/vcpkg /usr/local/graalvm
        sudo rm -rf /home/linuxbrew /usr/local/miniconda /usr/share/miniconda
        
        # æ¸…ç† Docker
        sudo systemctl stop docker || true
        sudo docker system prune -a -f --volumes || true
        sudo rm -rf /var/lib/docker /var/lib/containerd || true
        
        # æ¸…ç† APT ç¼“å­˜
        sudo apt-get clean
        sudo rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*
        
        # æ¸…ç†æ—¥å¿—
        sudo journalctl --vacuum-time=1d || true
        sudo rm -rf /var/log/*.log /var/log/*/*.log || true
        
        echo "=== æ¸…ç†åç£ç›˜çŠ¶æ€ ==="
        df -h /
        
        # æ£€æŸ¥å¯ç”¨ç©ºé—´
        AVAIL_GB=$(df / | tail -1 | awk '{print int($4/1024/1024)}')
        echo "å¯ç”¨ç©ºé—´: ${AVAIL_GB}GB"
        if [ $AVAIL_GB -lt 20 ]; then
          echo "é”™è¯¯: å¯ç”¨ç©ºé—´ä¸è¶³ 20GBï¼Œæ— æ³•è¿›è¡Œç¼–è¯‘"
          exit 1
        fi

    - name: Install Dependencies
      run: |
        echo "=== å®‰è£…ç¼–è¯‘ä¾èµ– ==="
        sudo apt-get update -qq
        sudo apt-get install -y \
          build-essential clang flex bison g++ gawk gcc-multilib g++-multilib \
          gettext git libncurses5-dev libncursesw5-dev libssl-dev python3 \
          python3-dev python3-setuptools rsync swig unzip zlib1g-dev file wget \
          curl time xsltproc libelf-dev
        
        # å®‰è£…å¯é€‰ä¾èµ–
        sudo apt-get install -y ccache fastjar ecj subversion || true
        
        echo "=== ä¾èµ–å®‰è£…å®Œæˆ ==="
        which gcc g++ python3 git make

    - name: Set Build Variables
      run: |
        case "${{ github.event.inputs.firmware_version }}" in
          "v24.10.2")
            echo "REPO_BRANCH=openwrt-24.10" >> $GITHUB_ENV
            echo "REPO_VERSION=v24.10.2" >> $GITHUB_ENV
            echo "OPENWRT_VERSION=24.10" >> $GITHUB_ENV
            ;;
          "v23.05.4")
            echo "REPO_BRANCH=openwrt-23.05" >> $GITHUB_ENV
            echo "REPO_VERSION=v23.05.4" >> $GITHUB_ENV
            echo "OPENWRT_VERSION=23.05" >> $GITHUB_ENV
            ;;
          *)
            echo "ä¸æ”¯æŒçš„ç‰ˆæœ¬"
            exit 1
            ;;
        esac
        
        echo "REPO_URL=https://github.com/immortalwrt/immortalwrt" >> $GITHUB_ENV
        echo "BUILD_DATE=$(date +'%Y%m%d')" >> $GITHUB_ENV
        echo "FIRMWARE_SIZE=${{ github.event.inputs.rootfs_size }}" >> $GITHUB_ENV
        echo "KERNEL_SIZE=${{ github.event.inputs.kernel_size }}" >> $GITHUB_ENV

    - name: Clone Source Code
      run: |
        echo "=== å…‹éš† ImmortalWrt æºç  ==="
        echo "ä»“åº“: $REPO_URL"
        echo "åˆ†æ”¯: $REPO_BRANCH"
        echo "ç‰ˆæœ¬: $REPO_VERSION"
        
        git clone --depth 1 -b $REPO_BRANCH $REPO_URL openwrt
        cd openwrt
        git fetch --depth 1 origin tag $REPO_VERSION
        git checkout $REPO_VERSION
        
        echo "=== å½“å‰ä»£ç ä¿¡æ¯ ==="
        echo "å½“å‰åˆ†æ”¯: $(git branch --show-current)"
        echo "å½“å‰æäº¤: $(git rev-parse HEAD)"
        echo "æäº¤ä¿¡æ¯: $(git log -1 --pretty=format:'%s')"

    - name: Update and Install Feeds
      run: |
        echo "=== æ›´æ–°å’Œå®‰è£…è½¯ä»¶æº ==="
        cd openwrt
        
        # æ›´æ–°è½¯ä»¶æº
        ./scripts/feeds update -a
        
        # å®‰è£…è½¯ä»¶æº
        ./scripts/feeds install -a
        
        echo "=== è½¯ä»¶æºä¿¡æ¯ ==="
        ./scripts/feeds list | head -20

    - name: Generate Configuration
      run: |
        echo "=== ç”Ÿæˆç¼–è¯‘é…ç½® ==="
        cd openwrt
        
        # åˆ›å»ºé…ç½®æ–‡ä»¶
        cat > .config << 'CONFIG_EOF'
        # Target Platform
        CONFIG_TARGET_x86=y
        CONFIG_TARGET_x86_64=y
        CONFIG_TARGET_x86_64_DEVICE_generic=y
        
        # Target Images
        CONFIG_TARGET_KERNEL_PARTSIZE=${{ env.KERNEL_SIZE }}
        CONFIG_TARGET_ROOTFS_PARTSIZE=${{ env.FIRMWARE_SIZE }}
        CONFIG_GRUB_TIMEOUT="3"
        CONFIG_GRUB_TITLE="ImmortalWrt"
        CONFIG_GRUB_IMAGES=y
        CONFIG_GRUB_EFI_IMAGES=y
        CONFIG_TARGET_ROOTFS_EXT4FS=y
        CONFIG_TARGET_ROOTFS_SQUASHFS=y
        CONFIG_TARGET_IMAGES_GZIP=y
        
        # Base System
        CONFIG_PACKAGE_luci=y
        CONFIG_PACKAGE_luci-ssl=y
        CONFIG_PACKAGE_luci-theme-bootstrap=y
        
        # Network Protocols
        CONFIG_PACKAGE_luci-proto-ipv6=y
        CONFIG_PACKAGE_luci-proto-ppp=y
        CONFIG_PACKAGE_6in4=y
        CONFIG_PACKAGE_ppp-mod-pppoe=y
        
        # Firewall
        CONFIG_PACKAGE_luci-app-firewall=y
        CONFIG_PACKAGE_iptables-mod-extra=y
        CONFIG_PACKAGE_iptables-mod-filter=y
        CONFIG_PACKAGE_ip6tables-extra=y
        
        # Essential Tools
        CONFIG_PACKAGE_wget-ssl=y
        CONFIG_PACKAGE_curl=y
        CONFIG_PACKAGE_ca-certificates=y
        CONFIG_PACKAGE_ethtool=y
        CONFIG_PACKAGE_lm-sensors=y
        
        # Network Drivers - Intel
        CONFIG_PACKAGE_kmod-igb=y              # Intel Gigabit
        CONFIG_PACKAGE_kmod-e1000e=y           # Intel PCIe Gigabit
        CONFIG_PACKAGE_kmod-igc=y              # Intel 2.5G (I225/I226)
        CONFIG_PACKAGE_kmod-ixgbe=y            # Intel 10G
        CONFIG_PACKAGE_kmod-i40e=y             # Intel 40G
        
        # Network Drivers - Realtek
        CONFIG_PACKAGE_kmod-r8169=y            # Realtek Gigabit
        CONFIG_PACKAGE_kmod-r8125=y            # Realtek 2.5G
        CONFIG_PACKAGE_kmod-r8168=y            # Realtek Gigabit
        
        # Network Drivers - Others
        CONFIG_PACKAGE_kmod-tg3=y              # Broadcom
        CONFIG_PACKAGE_kmod-via-velocity=y     # VIA
        CONFIG_PACKAGE_kmod-tulip=y            # DEC Tulip
        
        # USB and Storage
        CONFIG_PACKAGE_kmod-usb-core=y
        CONFIG_PACKAGE_kmod-usb2=y
        CONFIG_PACKAGE_kmod-usb3=y
        CONFIG_PACKAGE_kmod-usb-storage=y
        CONFIG_PACKAGE_kmod-fs-ext4=y
        CONFIG_PACKAGE_kmod-fs-vfat=y
        CONFIG_PACKAGE_kmod-fs-ntfs3=y
        CONFIG_PACKAGE_ntfs3-mount=y
        
        # Block and Filesystem Tools
        CONFIG_PACKAGE_fdisk=y
        CONFIG_PACKAGE_e2fsprogs=y
        CONFIG_PACKAGE_mkf2fs=y
        CONFIG_PACKAGE_partx-utils=y
        CONFIG_PACKAGE_lsblk=y
        
        # Sound Support
        CONFIG_PACKAGE_kmod-sound-hda-intel=y
        CONFIG_PACKAGE_kmod-sound-hda-codec-realtek=y
        CONFIG_PACKAGE_kmod-sound-hda-codec-hdmi=y
        CONFIG_PACKAGE_alsa-utils=y
        
        # Compilation Options
        CONFIG_CCACHE=y
        CONFIG_BUILD_LOG=y
        
        # Language Support
        CONFIG_PACKAGE_luci-i18n-base-zh-cn=y
        CONFIG_PACKAGE_luci-i18n-firewall-zh-cn=y
        CONFIG_PACKAGE_luci-i18n-opkg-zh-cn=y
        CONFIG_EOF
        
        # æ ¹æ®ç”¨æˆ·è¾“å…¥æ·»åŠ  Docker æ”¯æŒ
        if [ "${{ github.event.inputs.include_docker }}" == "true" ]; then
          cat >> .config << 'DOCKER_EOF'
        
        # Docker Support
        CONFIG_PACKAGE_luci-app-dockerman=y
        CONFIG_PACKAGE_luci-lib-docker=y
        CONFIG_PACKAGE_docker=y
        CONFIG_PACKAGE_dockerd=y
        CONFIG_DOCKER_CGROUP_OPTIONS=y
        CONFIG_DOCKER_NET_MACVLAN=y
        CONFIG_DOCKER_STO_EXT4=y
        CONFIG_KERNEL_CGROUP_DEVICE=y
        CONFIG_KERNEL_CGROUP_FREEZER=y
        CONFIG_KERNEL_NET_CLS_CGROUP=y
        CONFIG_KERNEL_EXT4_FS_POSIX_ACL=y
        CONFIG_KERNEL_FS_POSIX_ACL=y
        CONFIG_KERNEL_MEMCG_SWAP=y
        CONFIG_KERNEL_MEMCG_SWAP_ENABLED=y
        CONFIG_PACKAGE_luci-i18n-dockerman-zh-cn=y
        DOCKER_EOF
        fi
        
        # æ ¹æ®ç”¨æˆ·è¾“å…¥æ·»åŠ ä»£ç†å·¥å…·
        if [ "${{ github.event.inputs.include_passwall2 }}" == "true" ]; then
          cat >> .config << 'PROXY_EOF'
        
        # Proxy Tools
        CONFIG_PACKAGE_luci-app-openclash=y
        CONFIG_PACKAGE_luci-app-homeproxy=y
        CONFIG_PACKAGE_luci-app-passwall=y
        CONFIG_PACKAGE_luci-app-passwall2=y
        
        # PassWall Dependencies
        CONFIG_PACKAGE_luci-app-passwall_INCLUDE_Xray=y
        CONFIG_PACKAGE_luci-app-passwall_INCLUDE_Hysteria=y
        CONFIG_PACKAGE_luci-app-passwall_INCLUDE_Shadowsocks_Libev_Client=y
        CONFIG_PACKAGE_luci-app-passwall_INCLUDE_ShadowsocksR_Libev_Client=y
        CONFIG_PACKAGE_luci-app-passwall_INCLUDE_Simple_Obfs=y
        CONFIG_PACKAGE_luci-app-passwall_INCLUDE_V2ray_Plugin=y
        
        # PassWall2 Dependencies
        CONFIG_PACKAGE_luci-app-passwall2_INCLUDE_Xray=y
        CONFIG_PACKAGE_luci-app-passwall2_INCLUDE_Hysteria=y
        CONFIG_PACKAGE_luci-app-passwall2_INCLUDE_Shadowsocks_Rust_Client=y
        CONFIG_PACKAGE_luci-app-passwall2_INCLUDE_ShadowsocksR_Libev_Client=y
        
        # Language Support
        CONFIG_PACKAGE_luci-i18n-passwall-zh-cn=y
        CONFIG_PACKAGE_luci-i18n-passwall2-zh-cn=y
        CONFIG_PACKAGE_luci-i18n-openclash-zh-cn=y
        CONFIG_PACKAGE_luci-i18n-homeproxy-zh-cn=y
        PROXY_EOF
        fi
        
        # åº”ç”¨é…ç½®
        make defconfig
        
        echo "=== é…ç½®å·®å¼‚ ==="
        ./scripts/diffconfig.sh | tee diffconfig.txt
        
        echo "=== é…ç½®éªŒè¯ ==="
        grep -E "CONFIG_TARGET_|CONFIG_PACKAGE_luci|CONFIG_PACKAGE_kmod-igc" .config | head -20

    - name: Download Dependencies
      run: |
        echo "=== ä¸‹è½½ç¼–è¯‘ä¾èµ– ==="
        cd openwrt
        
        make download -j$(nproc)
        
        # æ£€æŸ¥ä¸‹è½½çŠ¶æ€
        echo "=== æ£€æŸ¥ä¸‹è½½å¤±è´¥çš„æ–‡ä»¶ ==="
        find dl -size -1024c -exec ls -l {} \; 2>/dev/null || true
        find dl -size -1024c -delete 2>/dev/null || true
        
        echo "=== ä¸‹è½½å®Œæˆï¼Œç£ç›˜çŠ¶æ€ ==="
        df -h /

    - name: Compile Firmware
      run: |
        echo "=== å¼€å§‹ç¼–è¯‘å›ºä»¶ ==="
        cd openwrt
        
        # ç¼–è¯‘ç¯å¢ƒä¿¡æ¯
        echo "ç¼–è¯‘å¼€å§‹æ—¶é—´: $(date)"
        echo "å¯ç”¨CPUæ ¸å¿ƒ: $(nproc)"
        echo "å†…å­˜çŠ¶æ€: $(free -h)"
        echo "ç£ç›˜çŠ¶æ€: $(df -h /)"
        
        # è®¾ç½®ç¼–è¯‘ç¯å¢ƒå˜é‡
        export FORCE_UNSAFE_CONFIGURE=1
        export CCACHE_DIR=/tmp/.ccache
        export CCACHE_MAXSIZE=2G
        
        # å¼€å§‹ç¼–è¯‘
        JOBS=$(($(nproc) < 4 ? $(nproc) : 4))
        echo "ä½¿ç”¨ $JOBS ä¸ªçº¿ç¨‹è¿›è¡Œç¼–è¯‘"
        
        make -j$JOBS V=s 2>&1 | tee build.log || {
          echo "=== å¤šçº¿ç¨‹ç¼–è¯‘å¤±è´¥ï¼Œå¼€å§‹å•çº¿ç¨‹ç¼–è¯‘ ==="
          echo "å•çº¿ç¨‹ç¼–è¯‘æ—¶é—´: $(date)"
          make -j1 V=s 2>&1 | tee build-single.log
        }
        
        echo "=== ç¼–è¯‘å®Œæˆ ==="
        echo "ç¼–è¯‘ç»“æŸæ—¶é—´: $(date)"

    - name: Check Build Results
      run: |
        echo "=== æ£€æŸ¥ç¼–è¯‘ç»“æœ ==="
        cd openwrt
        
        echo "=== ç¼–è¯‘åç£ç›˜çŠ¶æ€ ==="
        df -h /
        
        echo "=== å›ºä»¶æ–‡ä»¶ ==="
        find bin/targets/ -name "*.img*" -o -name "*.bin" 2>/dev/null | head -10
        
        echo "=== å›ºä»¶å¤§å° ==="
        ls -lh bin/targets/x86/64/ 2>/dev/null || echo "æœªæ‰¾åˆ°å›ºä»¶æ–‡ä»¶"
        
        # æ£€æŸ¥å¿…è¦æ–‡ä»¶æ˜¯å¦å­˜åœ¨
        if [ ! -d "bin/targets/x86/64" ]; then
          echo "é”™è¯¯: ç¼–è¯‘å¤±è´¥ï¼Œæœªæ‰¾åˆ°ç›®æ ‡æ–‡ä»¶"
          exit 1
        fi

    - name: Organize Firmware Files
      run: |
        echo "=== æ•´ç†å›ºä»¶æ–‡ä»¶ ==="
        cd openwrt/bin/targets/x86/64
        
        # åˆ é™¤ä¸éœ€è¦çš„åŒ…æ–‡ä»¶å¤¹
        rm -rf packages
        
        # ç”Ÿæˆæ–‡ä»¶ä¿¡æ¯
        ls -la > file_list.txt
        
        # è®¾ç½®ç¯å¢ƒå˜é‡
        echo "FIRMWARE_PATH=$(pwd)" >> $GITHUB_ENV
        echo "BUILD_SUCCESS=true" >> $GITHUB_ENV
        
        echo "=== å›ºä»¶æ–‡ä»¶åˆ—è¡¨ ==="
        cat file_list.txt

    - name: Upload Build Artifacts
      if: env.BUILD_SUCCESS == 'true'
      uses: actions/upload-artifact@v4
      with:
        name: ImmortalWrt-${{ env.OPENWRT_VERSION }}-x86_64-${{ env.BUILD_DATE }}
        path: ${{ env.FIRMWARE_PATH }}
        retention-days: 7

    - name: Generate Release Info
      if: env.BUILD_SUCCESS == 'true'
      run: |
        echo "RELEASE_TAG=${{ env.OPENWRT_VERSION }}-${{ env.BUILD_DATE }}-$(date +'%H%M')" >> $GITHUB_ENV
        
        # ç”Ÿæˆå‘å¸ƒè¯´æ˜
        cat > release_notes.md << 'RELEASE_EOF'
        ## ImmortalWrt ${{ env.OPENWRT_VERSION }} x86_64 å›ºä»¶
        
        **æ„å»ºæ—¶é—´**: ${{ env.BUILD_DATE }}  
        **ç‰ˆæœ¬**: ${{ env.REPO_VERSION }}  
        **å¹³å°**: x86_64 Generic
        
        ### ä¸»è¦ç‰¹æ€§
        - âœ… **åŸºäº ImmortalWrt ${{ env.OPENWRT_VERSION }}** - æœ€æ–°ç¨³å®šç‰ˆ
        - âœ… **å®Œæ•´ç½‘å¡é©±åŠ¨æ”¯æŒ** - åŒ…å« Intel 2.5G (I225/I226) ç½‘å¡
        - âœ… **ä¸­æ–‡ç•Œé¢** - å®Œæ•´æœ¬åœ°åŒ–æ”¯æŒ
        - âœ… **GRUB å¼•å¯¼** - æ”¯æŒ UEFI å’Œä¼ ç»Ÿ BIOS
        RELEASE_EOF
        
        if [ "${{ github.event.inputs.include_docker }}" == "true" ]; then
          echo "        - âœ… **Docker æ”¯æŒ** - åŒ…å« DockerMan ç®¡ç†ç•Œé¢" >> release_notes.md
        fi
        
        if [ "${{ github.event.inputs.include_passwall2 }}" == "true" ]; then
          cat >> release_notes.md << 'PROXY_INFO_EOF'
        - âœ… **ç§‘å­¦ä¸Šç½‘å·¥å…·** - OpenClash + HomeProxy + PassWall + PassWall2
        PROXY_INFO_EOF
        fi
        
        cat >> release_notes.md << 'RELEASE_END_EOF'
        
        ### ç³»ç»Ÿé…ç½®
        - **å†…æ ¸åˆ†åŒº**: ${{ env.KERNEL_SIZE }}MB
        - **æ ¹åˆ†åŒº**: ${{ env.FIRMWARE_SIZE }}MB
        - **æ–‡ä»¶ç³»ç»Ÿ**: SquashFS + EXT4
        - **å¼•å¯¼æ–¹å¼**: GRUB (UEFI + Legacy)
        
        ### ç½‘å¡é©±åŠ¨æ”¯æŒ
        - Intel Gigabit (igb, e1000e)
        - Intel 2.5G (igc) - I225/I226
        - Intel 10G (ixgbe)
        - Realtek Gigabit (r8169, r8168)
        - Realtek 2.5G (r8125)
        - Broadcom (tg3)
        
        ### å®‰è£…è¯´æ˜
        1. ä¸‹è½½å¯¹åº”çš„ `.img.gz` å›ºä»¶æ–‡ä»¶
        2. è§£å‹ç¼©åä½¿ç”¨ dd å‘½ä»¤æˆ– Rufus/Etcher å·¥å…·å†™å…¥
        3. é»˜è®¤IP: `192.168.1.1`
        4. é»˜è®¤ç”¨æˆ·: `root` (æ— å¯†ç )
        
        ### æ³¨æ„äº‹é¡¹
        - é¦–æ¬¡å¯åŠ¨å¯èƒ½éœ€è¦ç­‰å¾… 2-3 åˆ†é’Ÿ
        - å»ºè®®ä½¿ç”¨æœ‰çº¿è¿æ¥è¿›è¡Œåˆå§‹é…ç½®
        - æ”¯æŒåœ¨çº¿å‡çº§å’Œä¿ç•™é…ç½®
        
        ---
        **æ„å»ºäº**: GitHub Actions  
        **ç¼–è¯‘å™¨**: GCC $(gcc --version | head -1)
        RELEASE_END_EOF

    - name: Create Release
      if: env.BUILD_SUCCESS == 'true'
      uses: softprops/action-gh-release@v2
      with:
        tag_name: ${{ env.RELEASE_TAG }}
        name: ImmortalWrt ${{ env.OPENWRT_VERSION }} x86_64 - ${{ env.BUILD_DATE }}
        body_path: release_notes.md
        files: ${{ env.FIRMWARE_PATH }}/*
        draft: false
        prerelease: false
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

    - name: Cleanup Old Releases
      if: env.BUILD_SUCCESS == 'true'
      uses: dev-drprasad/delete-older-releases@v0.3.4
      with:
        keep_latest: 3
        delete_tags: true
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

    - name: Build Summary
      if: always()
      run: |
        echo "=== æ„å»ºæ€»ç»“ ==="
        echo "æ„å»ºçŠ¶æ€: ${{ job.status }}"
        echo "æ„å»ºæ—¶é—´: $(date)"
        echo "ç‰ˆæœ¬: ${{ env.REPO_VERSION }}"
        echo "Dockeræ”¯æŒ: ${{ github.event.inputs.include_docker }}"
        echo "PassWall2æ”¯æŒ: ${{ github.event.inputs.include_passwall2 }}"
        echo "å›ºä»¶å¤§å°: ${{ env.FIRMWARE_SIZE }}MB"
        
        if [ "${{ job.status }}" == "success" ]; then
          echo "âœ… æ„å»ºæˆåŠŸå®Œæˆ"
          echo "ğŸ“¦ å›ºä»¶å·²ä¸Šä¼ åˆ° Artifacts"
          echo "ğŸš€ Release å·²è‡ªåŠ¨åˆ›å»º"
        else
          echo "âŒ æ„å»ºå¤±è´¥"
          echo "è¯·æ£€æŸ¥æ„å»ºæ—¥å¿—è·å–è¯¦ç»†ä¿¡æ¯"
        fi
